# Установка и запуск торгового робота

Этот документ описывает шаги, необходимые для установки, настройки и запуска торгового робота на хост-машине с использованием Docker.

## 1. Клонирование репозитория

Сначала клонируйте репозиторий с проектом на ваш сервер:

```bash
git clone <URL вашего репозитория>
cd <название папки репозитория>
```

## 2. Конфигурация

Перед запуском робота необходимо создать и настроить файлы конфигурации.

### Файл `.env`

Этот файл содержит секретные ключи и токены. Создайте файл `.env` в корневой папке проекта. Вы можете скопировать и отредактировать шаблон:

```bash
cp .env.example .env
```

Затем откройте `.env` и впишите ваши реальные значения:

- `API_KEY`: Ваш API ключ от биржи ByBit.
- `API_SECRET`: Ваш API секрет от биржи ByBit.
- `TELEGRAM_BOT_TOKEN`: Токен вашего Telegram-бота.

### Файл `settings.py`

Этот файл (который не отслеживается Git) должен содержать все параметры торговой стратегии:
- Периоды EMA (быстрой и медленной)
- Размер позиции
- Сетка ордеров для усреднения (DCA)
- Настройки Take Profit
- И другие параметры, специфичные для вашей стратегии.

**Важно:** Убедитесь, что вы создали этот файл и настроили его в соответствии с вашей торговой стратегией перед запуском.

### Файл `bot_state.json`

Робот использует файл `bot_state.json` для хранения своего состояния между перезапусками. **Перед первым запуском контейнера необходимо создать этот файл.**

Создайте пустой файл:

```bash
touch bot_state.json
```
Или создайте файл с начальным состоянием:
```json
{"is_trading_enabled": false}
```

## 3. Настройка Docker Compose

Для запуска нескольких копий робота для разных торговых инструментов (например, SHIB1000, BTC, ETH) необходимо уникальное имя для каждого контейнера.

Откройте файл `docker-compose.yml` и измените имя контейнера.

**Пример:**
```yaml
services:
  trcoremabot_shib1000: # <-- Измените это имя
    build: .
    container_name: trcoremabot_shib1000 # <-- И это имя тоже
    restart: always
    # ...
```

## 4. Сборка и запуск

После того как все файлы конфигурации созданы и настроены, вы можете собрать Docker-образ и запустить контейнер:

```bash
docker-compose up --build -d
```

## 5. Управление роботом

Вы можете управлять роботом через команды в Telegram-боте:
- `/start_bot` - запустить торговлю.
- `/stop` - остановить торговлю.
- `/balance` - получить текущий баланс.
- `/pnl` - получить информацию о прибыли и убытках.

## 6. Просмотр логов

Логи работы робота можно посмотреть с помощью Docker:

```bash
docker logs -f <имя_вашего_контейнера>
```

# Обзор торгового робота

Этот проект представляет собой торгового робота для криптовалютной биржи ByBit, использующего стратегию на основе пересечения скользящих средних (EMA) с элементами усреднения (DCA).

## Функционал

- **Торговая стратегия**: Робот входит в позицию при коррекции цены к быстрой EMA в направлении основного тренда, определяемого двумя EMA (быстрой и медленной).
- **Управление позицией**:
    - **Take Profit**: Автоматическое закрытие позиции при достижении целевой прибыли.
    - **DCA (Dollar-Cost Averaging)**: Усреднение позиции путем добавления к ней на определенных уровнях, если цена идет против сделки.
    - **Выход по смене тренда**: Закрытие позиции в безубыток при смене направления тренда.
- **Интеграция с Telegram**: Управление роботом и получение уведомлений о его действиях через Telegram-бота.
- **Контейнеризация**: Проект полностью готов к запуску в Docker-контейнере.

## Структура проекта

- **`main.py`**: Главный файл, точка входа. Запускает Telegram-бота и основной цикл торговой логики.
- **`trader.py`**: Модуль для взаимодействия с API биржи ByBit. Содержит функции для получения рыночных данных, размещения ордеров и управления позициями.
- **`strategy.py`**: Ядро торговой логики. Реализует стратегию входа, выхода, усреднения и тейк-профита.
- **`logger.py`**: Настройка системы логирования для записи действий робота и отладки.
- **`requirements.txt`**: Список всех необходимых Python-библиотек.
- **`Dockerfile`**: Файл для сборки Docker-образа приложения.
- **`docker-compose.yml`**: Файл для удобного запуска и управления Docker-контейнером.
- **`settings.py` (не отслеживается)**: Файл конфигурации, где должны храниться API-ключи, параметры стратегии (например, периоды EMA, размер позиции, сетка DCA) и другие настройки.
- **`.env` (не отслеживается)**: Файл для хранения секретных данных, таких как API-ключи и токен Telegram-бота.

## Как это работает

1.  **Запуск**: `main.py` инициализирует сессию с ByBit, запускает Telegram-бота в отдельном потоке и создает экземпляр `TradingBot` из `strategy.py`.
2.  **Управление через Telegram**: Пользователь может запускать и останавливать торговлю, а также запрашивать баланс и PnL через команды в Telegram.
3.  **Основной цикл**:
    - Робот постоянно запрашивает последние данные о свечах (`fetch_klines`).
    - На каждой новой свече он пересчитывает EMA и проверяет условия для входа в позицию (`check_entry`).
    - Если робот находится в позиции, он непрерывно проверяет условия для выхода (тейк-профит, смена тренда) и для усреднения (`check_exit`, `check_dca`).
4.  **Логирование**: Все ключевые действия (вход, выход, ошибки) записываются в лог-файл в директории `logs`.
